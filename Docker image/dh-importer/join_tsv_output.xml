<tool id="join_tsv_output" name="Join TSV Files" version="1.2.0">
    <description>for export to DataHub</description>
    <requirements>
        <requirement type="package" version="1.0.0"> pandas </requirement>
    </requirements>
    <command detect_errors="exit_code">
        <![CDATA[
            #set result_file = "joined_results_merged"
            python3 '${__tool_directory__}/join_tsv_output.py' "$select_data_type.value" --input_file
            #for $element in $in_1:
                "${element}"
            #end for
            --output_file $result_file
        ]]>
    </command>
    <inputs>
        <param name="in_1" type="data" multiple="True"
               label="Select TSV List"
               help="This is generated by Create TSV Output tool."/>
        <param name="select_data_type" type="select" label="Select Data Type">
            <option value="expression">Expression</option>
            <option value="mutation" selected="true">Mutation</option>
        </param>
    </inputs>
    <outputs>
        <data name="out_1" format="tabular" label="Merged Expression Dataset"
              from_work_dir="joined_results_merged">
                <filter>select_data_type == 'expression' </filter>
        </data>
        <data name="out_2" format="tabular" label="Merged Mutation Dataset"
              from_work_dir="joined_results_merged">
                <filter>select_data_type == 'mutation'</filter>
        </data>
    </outputs>

    <help>
.. class:: infomark

This tool is used to combine several samples in TSV form into one TSV file.

This tool has following input and output files.

**Inputs**

- TSV Output List that is generated by Create Merged TSV Tool.
- Output Dataset Type: Select output dataset type (Merged).

**Outputs**

- Single Merged TSV Dataset.
    </help>
</tool>
